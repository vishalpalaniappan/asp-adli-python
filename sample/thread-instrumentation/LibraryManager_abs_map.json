{
  "LibraryManager.py": {
    "file": "Library Manager Multi Threaded",
    "version:": "0.0.0",
    "description": "Maps the abstraction to the line number. This will be used by the log injector to automatically instrument the abstraction ID's when it parses the AST and reads the line number.",
    "files": [
      {
        "path": "LibraryManager.py",
        "modules": {
          "global": {
            "startLine": 1,
            "abstractions": [
              {
                "id": "0-1",
                "lineDelta": 0,
                "syntax": "import queue"
              },
              {
                "id": "0-2",
                "lineDelta": 1,
                "syntax": "import sys"
              },
              {
                "id": "0-3",
                "lineDelta": 2,
                "syntax": "import threading"
              },
              {
                "id": "0-4",
                "lineDelta": 3,
                "syntax": "from BookShelfThread import BookShelfThread"
              },
              {
                "id": "0-5",
                "lineDelta": 62,
                "syntax": "if \"__main__\" == __name__:"
              },
              {
                "id": "0-5-1",
                "lineDelta": 63,
                "syntax": "sys.exit(library_manager())"
              }
            ]
          },
          "1": {
            "startLine": 6,
            "abstractions": [
              {
                "id": "1",
                "lineDelta": 0,
                "syntax": "def accept_book():"
              },
              {
                "id": "1-1",
                "lineDelta": 2,
                "syntax": "print(f\"\n{threading.get_ident()} Enter book details:\")"
              },
              {
                "id": "1-2",
                "lineDelta": 4,
                "syntax": "name = input(f\"{threading.get_ident()} Book name: \")"
              },
              {
                "id": "1-3",
                "lineDelta": 6,
                "syntax": "genre = input(f\"{threading.get_ident()} Genre: \")"
              },
              {
                "id": "1-4",
                "lineDelta": 8,
                "syntax": "book_details = {\"name\":name,\"genre\":genre}"
              },
              {
                "id": "1-5",
                "lineDelta": 10,
                "syntax": "return book_details"
              }
            ]
          },
          "2": {
            "startLine": 18,
            "abstractions": [
              {
                "id": "2",
                "lineDelta": 0,
                "syntax": "def main_menu():"
              },
              {
                "id": "2-1",
                "lineDelta": 1,
                "syntax": "message_queue = queue.Queue()"
              },
              {
                "id": "2-2",
                "lineDelta": 3,
                "syntax": "BookShelfThread(message_queue)"
              },
              {
                "id": "2-3",
                "lineDelta": 5,
                "syntax": "basket = []"
              },
              {
                "id": "2-4",
                "lineDelta": 7,
                "syntax": "print("
              },
              {
                "id": "2-5",
                "lineDelta": 16,
                "syntax": "while True:"
              },
              {
                "id": "2-5-1",
                "lineDelta": 17,
                "syntax": "response = input().lower()"
              },
              {
                "id": "2-5-2",
                "lineDelta": 18,
                "syntax": "print(f\"Option Selected: {response}\")"
              },
              {
                "id": "2-5-3",
                "lineDelta": 20,
                "syntax": "if response == \"a\":"
              },
              {
                "id": "2-5-3-1",
                "lineDelta": 21,
                "syntax": "book_details = accept_book()"
              },
              {
                "id": "2-5-3-2",
                "lineDelta": 22,
                "syntax": "basket.append(book_details)"
              },
              {
                "id": "2-5-3-3",
                "lineDelta": 23,
                "syntax": "continue"
              },
              {
                "id": "2-5-4",
                "lineDelta": 25,
                "syntax": "elif response == \"p\":"
              },
              {
                "id": "2-5-4-1",
                "lineDelta": 26,
                "syntax": "message_queue.put({"
              },
              {
                "id": "2-5-4-2",
                "lineDelta": 30,
                "syntax": "continue"
              },
              {
                "id": "2-5-5",
                "lineDelta": 32,
                "syntax": "elif response == \"d\":"
              },
              {
                "id": "2-5-5-1",
                "lineDelta": 33,
                "syntax": "message_queue.put({"
              },
              {
                "id": "2-5-5-2",
                "lineDelta": 37,
                "syntax": "continue"
              },
              {
                "id": "2-5-6",
                "lineDelta": 39,
                "syntax": "else:"
              },
              {
                "id": "2-5-6-1",
                "lineDelta": 40,
                "syntax": "message_queue.put({"
              },
              {
                "id": "2-5-6-2",
                "lineDelta": 43,
                "syntax": "continue"
              }
            ]
          }
        }
      }
    ]
  },
  "BookShelfThread.py": {
    "file": "Book Shelf Thread",
    "version:": "0.0.0",
    "description": "Maps the abstraction to the line number for BookShelfThread. This will be used by the log injector to automatically instrument the abstraction IDs when it parses the AST and reads the line number.",
    "files": [
      {
        "path": "BookShelfThread.py",
        "modules": {
          "global": {
            "startLine": 1,
            "abstractions": [
              {
                "id": "0-1",
                "lineDelta": 0,
                "syntax": "import threading"
              },
              {
                "id": "0-2",
                "lineDelta": 2,
                "syntax": "class BookShelfThread(threading.Thread):"
              }
            ]
          },
          "1": {
            "startLine": 4,
            "abstractions": [
              {
                "id": "1",
                "lineDelta": 0,
                "syntax": "def __init__(self, queue):"
              },
              {
                "id": "1-1",
                "lineDelta": 1,
                "syntax": "super().__init__(daemon=False)"
              },
              {
                "id": "1-2",
                "lineDelta": 2,
                "syntax": "self.book_shelf = {}"
              },
              {
                "id": "1-3",
                "lineDelta": 3,
                "syntax": "self.queue = queue"
              },
              {
                "id": "1-4",
                "lineDelta": 4,
                "syntax": "self.start()"
              }
            ]
          },
          "2": {
            "startLine": 10,
            "abstractions": [
              {
                "id": "2",
                "lineDelta": 0,
                "syntax": "def __del__(self):"
              },
              {
                "id": "2-1",
                "lineDelta": 1,
                "syntax": "print(f\"{threading.get_ident()} Terminating book shelf thread\")"
              }
            ]
          },
          "3": {
            "startLine": 13,
            "abstractions": [
              {
                "id": "3",
                "lineDelta": 0,
                "syntax": "def place_books_on_shelf_from_basket(self, basket):"
              },
              {
                "id": "3-1",
                "lineDelta": 2,
                "syntax": "while len(basket) > 0:"
              },
              {
                "id": "3-1-1",
                "lineDelta": 3,
                "syntax": "book = basket.pop()"
              },
              {
                "id": "3-1-2",
                "lineDelta": 5,
                "syntax": "print(f\"{threading.get_ident()} Accepted book: {book['name']} (Genre: {book['genre']})\")"
              },
              {
                "id": "3-1-3",
                "lineDelta": 7,
                "syntax": "firstLetter = book['name'][0]"
              },
              {
                "id": "3-1-4",
                "lineDelta": 9,
                "syntax": "if (firstLetter not in self.book_shelf):"
              },
              {
                "id": "3-1-4-1",
                "lineDelta": 10,
                "syntax": "self.book_shelf[firstLetter] = []"
              },
              {
                "id": "3-1-5",
                "lineDelta": 11,
                "syntax": "else:"
              },
              {
                "id": "3-1-4-3",
                "lineDelta": 12,
                "syntax": "print(f\"{threading.get_ident()} Slot for book already exists.\")"
              },
              {
                "id": "3-1-6",
                "lineDelta": 14,
                "syntax": "self.book_shelf[firstLetter].append(book['name'])"
              }
            ]
          },
          "4": {
            "startLine": 30,
            "abstractions": [
              {
                "id": "4",
                "lineDelta": 0,
                "syntax": "def run(self):"
              },
              {
                "id": "4-1",
                "lineDelta": 1,
                "syntax": "while True:"
              },
              {
                "id": "4-1-1",
                "lineDelta": 2,
                "syntax": "if not self.queue.empty():"
              },
              {
                "id": "4-1-1-1",
                "lineDelta": 3,
                "syntax": "msg = self.queue.get(timeout=0.5)"
              },
              {
                "id": "4-1-1-2",
                "lineDelta": 5,
                "syntax": "if (msg[\"type\"] == \"add\"):"
              },
              {
                "id": "4-1-1-2-1",
                "lineDelta": 6,
                "syntax": "self.place_books_on_shelf_from_basket(msg[\"basket\"])"
              },
              {
                "id": "4-1-1-3",
                "lineDelta": 9,
                "syntax": "elif (msg[\"type\"] == \"display\"):"
              },
              {
                "id": "4-1-1-3-1",
                "lineDelta": 10,
                "syntax": "print(f\"\\n{threading.get_ident()} Book Shelf:\", self.book_shelf)"
              },
              {
                "id": "4-1-1-3-2",
                "lineDelta": 11,
                "syntax": "print(f\"{threading.get_ident()} Basket:\", msg[\"basket\"])"
              },
              {
                "id": "4-1-1-4",
                "lineDelta": 12,
                "syntax": "elif (msg[\"type\"] == \"quit\"):"
              },
              {
                "id": "4-1-1-4-1",
                "lineDelta": 13,
                "syntax": "break"
              }
            ]
          }
        }
      }
    ]
  }
}