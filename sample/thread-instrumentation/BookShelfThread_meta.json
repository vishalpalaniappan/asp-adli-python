{
  "0": {
    "intent": "Global path for the bookshelf thread module.",
    "name": "global",
    "type": "global",
    "start": true
  },
  "0-1": {
    "intent": "Import the threading library."
  },
  "0-2": {
    "intent": "Define the BookShelfThread class that runs in its own thread."
  },

  "1": {
    "intent": "Initialize the BookShelfThread with an empty bookshelf and a queue, then start the thread.",
    "type": "function",
    "name": "Initialize BookShelfThread"
  },
  "1-1": {
    "intent": "Initialize the base Thread class with daemon mode disabled."
  },
  "1-2": {
    "intent": "Create an empty bookshelf to store books grouped by first letter."
  },
  "1-3": {
    "intent": "Store the incoming queue to receive tasks from the main thread"
  },
  "1-4": {
    "intent": "Start the thread so that the book shelf manager starts."
  },

  "2": {
    "intent": "Log that the bookshelf thread is terminating when the object is destroyed.",
    "type": "function",
    "name": "Terminate BookShelfThread"
  },
  "2-1": {
    "intent": "Print a termination message for the bookshelf thread."
  },

  "3": {
    "intent": "Place all books from the basket onto the bookshelf grouped by the first letter of the book name.",
    "type": "function",
    "name": "Place Books On Shelf From Basket",
    "source": ["4-1-1-2-1"]
  },
  "3-1": {
    "intent": "Iterate while there are still books in the basket.",
    "type": "while"
  },
  "3-1-1": {
    "intent": "Remove the next book from the basket."
  },
  "3-1-2": {
    "intent": "Log that the book was accepted along with its name and genre."
  },
  "3-1-3": {
    "intent": "Get the first letter of the book's name to determine the shelf slot."
  },
  "3-1-4": {
    "intent": "Check whether a shelf slot already exists for this first letter.",
    "type": "conditional_branch"
  },
  "3-1-4-1": {
    "intent": "Create a new shelf slot for this first letter."
  },
  "3-1-5": {
    "intent": "Handle the case where the shelf slot already exists."
  },
  "3-1-5-1": {
    "intent": "Log that a shelf slot for this first letter already exists."
  },
  "3-1-6": {
    "intent": "Add the book's name to the appropriate shelf slot."
  },

  "4": {
    "intent": "Process messages from the queue and update or display the bookshelf based on the message type.",
    "type": "function",
    "name": "Run Book Shelf Thread Loop"
  },
  "4-1": {
    "intent": "Keep processing messages from the queue until told to quit.",
    "type": "while"
  },
  "4-1-1": {
    "intent": "Check whether there is a message available in the queue.",
    "type": "conditional_branch"
  },
  "4-1-1-1": {
    "intent": "Retrieve the next message from the queue with a timeout."
  },
  "4-1-1-2": {
    "intent": "Check if the message requests books to be added from the basket to the shelf.",
    "type": "conditional_branch"
  },
  "4-1-1-2-1": {
    "intent": "Place books from the basket onto the shelf according to the message.",
    "type": "function_call",
    "target": "3"
  },
  "4-1-1-3": {
    "intent": "Check if the message requests the current bookshelf and basket to be displayed.",
    "type": "conditional_branch"
  },
  "4-1-1-3-1": {
    "intent": "Print the current state of the bookshelf."
  },
  "4-1-1-3-2": {
    "intent": "Print the current contents of the basket that was sent with the message."
  },
  "4-1-1-4": {
    "intent": "Check if the message requests this thread to quit.",
    "type": "conditional_branch"
  },
  "4-1-1-4-1": {
    "intent": "Break out of the loop and end the thread run method."
  }
}
